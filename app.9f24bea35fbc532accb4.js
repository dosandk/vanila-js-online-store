(()=>{var e,t,r,s,n={69:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=e=>{var t,r,s,n;return r=t=class extends e{constructor(...e){const t=globalThis[Symbol.for("storeKey")];e.push(t),super(...e)}destroy(){if(this.subscriptions?.length)for(const e of this.subscriptions)e();super.destroy()}},s="name",n=`connected to store ${e.name}`,s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,t}},318:(e,t,r)=>{"use strict";r.d(t,{RB:()=>a,gK:()=>i});const s="ADD_PRODUCT",n="REMOVE_PRODUCT",i=e=>({type:s,payload:e}),a={[s]:(e=[],t)=>[...e,t],[n]:(e=[],t)=>e.filter((e=>e.id!==t.id))}},926:(e,t,r)=>{"use strict";r.d(t,{df:()=>a,s3:()=>i});const s="ADD_TO_WISHLIST",n="REMOVE_FROM_WISHLIST",i=e=>({type:s,payload:e}),a={[s]:(e=[],t)=>[...e,t],[n]:(e=[],t)=>e.filter((e=>e.id!==t.id))}},63:(e,t,r)=>{var s={"./cart/index.js":[383,383],"./error404/index.js":[232,232],"./main/index.js":[868,868],"./wishlist/index.js":[969,969]};function n(e){if(!r.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return r.e(t[1]).then((()=>r(n)))}n.keys=()=>Object.keys(s),n.id=63,e.exports=n}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return n[e](r,r.exports,a),r.exports}a.m=n,a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>e+"-"+e+".js",a.miniCssF=e=>e+".css",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="vanila-js-online-store:",a.l=(r,s,n,i)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+n){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+n),o.src=r),e[r]=[s];var h=(t,s)=>{o.onerror=o.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(s))),t)return t(s)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",r=e=>new Promise(((t,r)=>{var s=a.miniCssF(e),n=a.p+s;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var n=(a=r[s]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(n===e||n===t))return a}var i=document.getElementsByTagName("style");for(s=0;s<i.length;s++){var a;if((n=(a=i[s]).getAttribute("data-href"))===e||n===t)return a}})(s,n))return t();((e,t,r,s)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=i=>{if(n.onerror=n.onload=null,"load"===i.type)r();else{var a=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=o,n.parentNode.removeChild(n),s(l)}},n.href=t,document.head.appendChild(n)})(e,n,t,r)})),s={143:0},a.f.miniCss=(e,t)=>{s[e]?t.push(s[e]):0!==s[e]&&{232:1,383:1,868:1,969:1}[e]&&t.push(s[e]=r(e).then((()=>{s[e]=0}),(t=>{throw delete s[e],t})))},(()=>{var e={143:0};a.f.j=(t,r)=>{var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var n=new Promise(((r,n)=>s=e[t]=[r,n]));r.push(s[2]=n);var i=a.p+a.u(t),o=new Error;a.l(i,(r=>{if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",o.name="ChunkLoadError",o.type=n,o.request=i,s[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,n,[i,o,l]=r,c=0;if(i.some((t=>0!==e[t]))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)l(a)}for(t&&t(r);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkvanila_js_online_store=self.webpackChunkvanila_js_online_store||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";function e(e,t,n,i){return s(e,t),r(n,"set"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,n,i),i}function t(e,t,n){return s(e,t),r(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function r(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function s(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}class n{static get instance(){return t(n,n,i)?t(n,n,i):new n}constructor(){var r,s,a;if(a=[],(s="routes")in(r=this)?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,t(n,n,i))return t(n,n,i);e(n,n,i,this)}get strippedPath(){return decodeURI(window.location.pathname).replace(/^\/+|\/+$/g,"").replace(/\/{2,}/g,"/")}async route(){let e;for(let t of this.routes)if(e=this.strippedPath.match(t.pattern),e){this.page=await this.changePage(t.path,e);break}e||(this.page=await this.changePage("error404"))}async changePage(e,t){return this.page&&this.page.destroy&&this.page.destroy(),await(async(e,t)=>{const{default:r}=await a(63)(`./${e}/index.js`),s=new r(t),n=document.getElementById("page-content");return n.innerHTML="",n.append(s.element),s})(e,t)}navigate(e){history.pushState(null,null,e),this.route()}addRoute(e,t){return this.routes.push({pattern:e,path:t}),this}listen(){window.addEventListener("popstate",(()=>this.route())),this.route()}}var i={writable:!0,value:void 0};function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l{constructor({url:e="",html:t="",attributes:r={}}={}){o(this,"onPopState",(()=>{`/${this.router.strippedPath}`===this.url?this.element.classList.add(l.activeClassName):this.element.classList.remove(l.activeClassName)})),this.url=e,this.html=t,this.attributes=r,this.router=n.instance,this.render(),this.initEventListens()}render(){const e=document.createElement("a");e.setAttribute("href",this.url),e.innerHTML=this.html;for(const[t,r]of Object.entries(this.attributes))e.setAttribute(t,r);this.element=e}initEventListens(){this.element.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href");this.router.navigate(t)})),window.addEventListener("popstate",this.onPopState)}remove(){this.element&&this.element.remove()}destroy(){this.remove(),this.element=null,window.removeEventListener("popstate",this.onPopState)}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,s){return p(e,t),h(r,"set"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,r,s),s}function d(e,t,r){return p(e,t),h(r,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,r)}function h(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function p(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}o(l,"activeClassName","active");class m{constructor(e={},t={}){if(c(this,"state",{}),c(this,"listeners",[]),c(this,"getState",(e=>e?this.state[e]:this.state)),c(this,"setState",((e,t)=>{this.state[e]=t})),d(m,m,f))return d(m,m,f);this.reducers=e,this.state={...t},u(m,m,f,this)}dispatch(e={}){const{type:t,payload:r}=e;console.error("action",e);for(const e of Object.keys(this.reducers)){const s=this.reducers[e][t];if(s){const n=this.getState(e);console.error("current state",n);const i=s(n,r);this.setState(e,i),console.error("next state",this.getState());const a=this.listeners[t];if(a){const t=this.getState(e);for(const[e]of a.entries())e(t)}}}}subscribe(e,t){return this.listeners[e]?this.listeners[e].set(t,null):this.listeners[e]=new Map([[t,null]]),()=>this.listeners[e].delete(t)}}var f={writable:!0,value:void 0},v=a(318),b=a(926);const g={products:v.RB,wishlist:b.df};var y=a(69);const w=[{url:"/",html:'<i class="bi bi-shop"></i><span>Products</span>',attributes:{class:"link-unstyled"}},{url:"/wishlist",html:'<i class="bi bi-star"></i>Wishlist <span data-element="wishlistCounter">0</span>',attributes:{class:"link-unstyled"}},{url:"/cart",html:'<i class="bi bi-cart"></i>Cart <span data-element="cartCounter">0</span>',attributes:{class:"link-unstyled"}}];const E=Symbol.for("storeKey"),S=new m(g,{counter:0,loader:!1,products:[],wishlist:[]});globalThis[E]=S;const T=new((0,y.Z)(class{constructor(e){var t,r,s;s={},(r="subElements")in(t=this)?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,this.router=n.instance,this.store=e,this.render(),this.getSubElements(),this.renderTitle(),this.renderNavigationLinks(),this.initEventListeners()}renderTitle(){const e=new l({url:"/",html:"Online Store",attributes:{class:"link-unstyled"}});this.subElements.title.append(e.element)}renderNavigationLinks(){const e=w.map((e=>{const{url:t,html:r,attributes:s}=e,n=`/${this.router.strippedPath}`===t,i=document.createElement("li"),a=new l({url:t,html:r,attributes:s}).element;return n&&a.classList.add(l.activeClassName),i.append(a),i}));this.subElements.navigation.append(...e)}get template(){return'<div class="os-container">\n      <main class="os-products">\n        <aside class="sidebar">\n          <h2 class="sidebar__title" data-element="title">\n            \x3c!-- Title --\x3e\n          </h2>\n          <ul class="sidebar__nav" data-element="navigation">\n            \x3c!-- Navigation --\x3e\n          </ul>\n        </aside>\n\n        <section id="page-content">\n          \x3c!-- Page content --\x3e\n        </section>\n      </main>\n    </div>'}render(){const e=document.createElement("div");e.innerHTML=this.template,this.element=e.firstElementChild}getSubElements(){const e={},t=this.element.querySelectorAll("[data-element]");for(const r of t){e[r.dataset.element]=r}this.subElements=e}initializeRouter(){this.router.addRoute(/^$/,"main").addRoute(/^cart$/,"cart").addRoute(/^wishlist$/,"wishlist").addRoute(/404\/?$/,"error404").listen()}initEventListeners(){this.subElements.navigation.addEventListener("pointerdown",(e=>{const t=e.target.closest("a");if(t){const r=e.currentTarget.querySelectorAll("a");for(const e of r)e.classList.remove(l.activeClassName);t.classList.add(l.activeClassName)}})),this.store.subscribe("ADD_PRODUCT",(()=>{this.element.querySelector('[data-element="cartCounter"]').innerText=this.store.getState().products.length})),this.store.subscribe("ADD_TO_WISHLIST",(()=>{this.element.querySelector('[data-element="wishlistCounter"]').innerText=this.store.getState().wishlist.length}))}}));document.body.append(T.element),T.initializeRouter()})()})();