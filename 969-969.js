"use strict";(self.webpackChunkvanila_js_online_store=self.webpackChunkvanila_js_online_store||[]).push([[969],{1:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(948),n=s(931),a=s(69),r=s(318),o=s(926);const c=(0,a.Z)((0,n.Z)(class{constructor(e={},t,s){var i,n,a;a={},(n="subElements")in(i=this)?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a,this.product=e,this.store=t,this.observer=s,this.render(),this.initEventListeners()}get template(){const{images:e,rating:t,price:s,title:i,description:n}=this.product;return`\n      <div class="os-product-card">\n        <div class="os-product-img" style="background-image: url(${e[0].url});"></div>\n\n        <div class="os-product-content">\n          <div class="os-product-price-wrapper">\n            <div class="os-product-rating">\n              <span>${t}</span>\n              <i class="bi bi-star"></i>\n            </div>\n\n            <div class="os-product-price">${s} USD</div>\n          </div>\n\n          <h5 class="os-product-title">${i}</h5>\n          <p class="os-product-description">${n.slice(0,50)+"..."}</p>\n        </div>\n        ${this.footer}\n      </div>\n    `}get footer(){return'<footer class="os-product-footer">\n      <button class="os-btn-default add-to-wishlist-btn" data-element="addToWishlist">\n        <i class="bi bi-heart"></i>\n        <i class="bi bi-heart-fill"></i>\n        Wishlist\n      </button>\n\n      <button class="os-btn-primary add-to-cart-btn" data-element="addToCart">\n        <i class="bi bi-cart"></i>\n        <i class="bi bi-cart-check-fill"></i>\n        Cart\n      </button>\n    </footer>'}initEventListeners(){const{addToWishlist:e,addToCart:t}=this.subElements;e.addEventListener("pointerdown",(e=>{const t=e.currentTarget.classList.toggle("active");this.dispatchEvent("add-to-wishlist",{product:this.product,status:t}),this.store.dispatch((0,o.s3)(this.product))})),t.addEventListener("pointerdown",(e=>{const t=e.currentTarget.classList.toggle("active");this.dispatchEvent("add-to-wishlist",{product:this.product,status:t}),this.store.dispatch((0,r.gK)(this.product))}))}dispatchEvent(e="",t={}){this.observer.dispatchEvent({type:e,payload:t})}update(e={}){this.product=e,this.element.innerHTML=this.template}render(){this.element=(0,i.az)(this.template),this.subElements=(0,i.H)(this.element)}remove(){this.element&&this.element.remove()}destroy(){this.remove(),this.element=null,this.subElements={}}}));class l{constructor(e=[]){this.data=e,this.render(),this.renderCards()}getTemplate(){return'\n      <div class="os-products-list" data-element="body">\n        \x3c!-- Cards list --\x3e\n      </div>\n    '}render(){const e=document.createElement("div");e.innerHTML=this.getTemplate(),this.element=e.firstElementChild}renderCards(){const e=this.getCardsList(this.data);this.element.innerHTML="",this.element.append(...e)}update(e=[]){this.data=e,this.renderCards()}getCardsList(e=[]){return e.map((e=>new c(e).element))}add(e){this.data=[...this.data,...e];const t=this.getCardsList(e);this.element.append(...t)}remove(){this.element&&this.element.remove()}}},587:(e,t,s)=>{s.d(t,{Z:()=>o});class i{static create(e="",t=""){return new{success:n,error:a,info:r}[e](t)}constructor(){var e,t,s;if(s=2e3,(t="duration")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,new.target===i)throw new TypeError("Cannot construct Abstract instances directly")}get template(){}render(){const e=document.createElement("div");e.innerHTML=this.template,this.element=e.firstElementChild||e}show(e=document.body){e.append(this.element),this.timerId=setTimeout((()=>{this.remove()}),this.duration)}remove(){clearTimeout(this.timerId),this.element&&this.element.remove()}destroy(){this.remove()}}class n extends i{constructor(e=""){super(),this.message=e,this.render()}get template(){return`<div class="notification success" style="--value:${this.duration+"ms"}">\n      <div class="timer"></div>\n      <div class="inner-wrapper">\n        <div class="notification-body">\n          <i class="bi bi-check-circle"></i>\n          ${this.message}\n        </div>\n      </div>\n    </div>`}}class a extends i{constructor(e){super(),this.message=e,this.render(),this.addEventListeners()}get template(){return`<div class="notification error">\n      <div class="inner-wrapper">\n        <i class="bi bi-x close-btn" data-element="close"></i>\n        <div class="notification-body">\n          <i class="bi bi-exclamation-triangle"></i>\n          ${this.message}\n        </div>\n      </div>\n    </div>`}addEventListeners(){this.element.querySelector("[data-element='close']").addEventListener("click",(()=>{this.remove()}))}show(e=document.body){e.append(this.element)}}class r extends i{constructor(e=""){super(),this.message=e,this.render()}get template(){return`<div class="notification info" style="--value:${this.duration+"ms"}">\n      <div class="timer"></div>\n      <div class="inner-wrapper">\n        <div class="notification-body">\n          <i class="bi bi-info-circle"></i>\n          ${this.message}\n        </div>\n      </div>\n    </div>`}}class o{constructor({stackLimit:e=3}={}){var t,s,i;if(i=[],(s="notificationsList")in(t=this)?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,o.instance)return o.instance;this.stackLimit=e,o.instance=this,this.render()}render(){this.element=document.createElement("div"),this.element.className="notifications-container",document.body.append(this.element)}show(e="",t=""){const s=i.create(t,e);s.show(this.element),this.notificationsList.length>=this.stackLimit&&this.removeOldMessage(),this.notificationsList.push(s)}removeOldMessage(){this.notificationsList.shift().remove()}destroy(){for(const e of this.notificationsList)e.destroy();this.notificationsList=[],o.instance=null}}},948:(e,t,s)=>{s.d(t,{H:()=>a,Oo:()=>r,SO:()=>c,az:()=>n,xg:()=>o});const i=globalThis.document,n=(e="")=>{const t=i.createElement("div");return t.innerHTML=e,t.firstElementChild||t},a=(e,t="[data-element]")=>{const s={},i=e.querySelectorAll(t);for(const e of i){s[e.dataset.element]=e}return s},r=(e,t="",s,i={})=>(e.addEventListener(t,s,i),()=>{e.removeEventListener(t,s,i)}),o=(e,t="",s,i={})=>{e.removeEventListener(t,s,i)},c={window:globalThis.window,document:globalThis.window.document,body:globalThis.window.document.body}},931:(e,t,s)=>{function i(e,t,s,i){return r(e,t),a(s,"set"),function(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=s}}(e,s,i),i}function n(e,t,s){return r(e,t),a(s,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,s)}function a(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function r(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}s.d(t,{Z:()=>l});class o{constructor(){var e,t,s;s={},(t="callbacks")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}static get instance(){return n(o,o,c)||i(o,o,c,new o),n(o,o,c)}dispatchEvent(e){const{type:t,payload:s}=e,i=this.callbacks[t];if(i)for(const[e]of i.entries())e(s)}subscribe(e,t){return this.callbacks[e]?this.callbacks[e].set(t,null):this.callbacks[e]=new Map([[t,null]]),()=>this.callbacks[e].delete(t)}}var c={writable:!0,value:void 0};const l=e=>{var t,s,i,n;return s=t=class extends e{constructor(...e){e.push(o.instance),super(...e)}},i="name",n=`connected to observer ${e.name}`,i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,t}},969:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s(948),n=s(931);const a=(0,n.Z)(class{constructor({activePageIndex:e=0,totalPages:t=0}={},s){this.activePageIndex=e,this.totalPages=t,this.observer=s,this.render(),this.addEventListeners()}getTemplate(){return`\n      <nav class="os-pagination" hidden>\n        <a href="#" class="page-link previous" data-element="nav-prev">\n          <i class="bi bi-chevron-left"></i>\n        </a>\n        ${this.getPages()}\n        <a href="#" class="page-link next" data-element="nav-next">\n          <i class="bi bi-chevron-right"></i>\n        </a>\n      </nav>\n    `}getPages(){return`\n      <ul class="page-list" data-element="pagination">\n        ${new Array(this.totalPages).fill(1).map(((e,t)=>this.getPageTemplate(t))).join("")}\n      </ul>\n    `}getPageTemplate(e=0){return`<li>\n      <a href="#"\n        data-element="page-link"\n        class="page-link ${e===this.activePageIndex?"active":""}"\n        data-page-index="${e}">\n        ${e+1}\n      </a>\n    </li>`}setPage(e=0){if(e===this.activePageIndex)return;if(e>this.totalPages-1||e<0)return;this.dispatchEvent(e);const t=this.element.querySelector(".page-link.active");t&&t.classList.remove("active");const s=this.element.querySelector(`[data-page-index="${e}"]`);s&&s.classList.add("active"),this.activePageIndex=e}nextPage(){const e=this.activePageIndex+1;this.setPage(e)}prevPage(){const e=this.activePageIndex-1;this.setPage(e)}render(){const e=document.createElement("div");e.innerHTML=this.getTemplate(),this.element=e.firstElementChild,this.totalPages&&this.element.removeAttribute("hidden")}addEventListeners(){const e=this.element.querySelector('[data-element="nav-prev"]'),t=this.element.querySelector('[data-element="nav-next"]'),s=this.element.querySelector('[data-element="pagination"]');e.addEventListener("click",(e=>{e.preventDefault(),this.prevPage()})),t.addEventListener("click",(e=>{e.preventDefault(),this.nextPage()})),s.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest(".page-link");if(!t)return;const{pageIndex:s}=t.dataset;this.setPage(parseInt(s,10))}))}dispatchEvent(e){this.observer.dispatchEvent({type:"page-changed",payload:e})}});var r=s(69),o=s(587),c=s(1);function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=(0,r.Z)((0,n.Z)(class{constructor(e,t,s){l(this,"subElements",{}),l(this,"components",{}),l(this,"subscriptions",[]),l(this,"pageSize",3),this.store=t,this.observer=s;const{wishlist:i}=this.store.getState();this.products=i,this.initialize()}initialize(){this.initComponents(),this.render(),this.renderComponents(),this.initEventListeners()}getTemplate(){return'\n      <div class="page-container">\n        <h1 class="page-title">WishList</h1>\n        <div data-element="list">\n          \x3c!-- Cards List component --\x3e\n        </div>\n        <div data-element="pagination" class="os-products-footer">\n          \x3c!-- Pagination component --\x3e\n        </div>\n        <div data-element="emptyData">There is no data in the wishlist</div>\n      </div>\n    '}initComponents(){const e=new a({activePageIndex:0,totalPages:Math.ceil(this.products.length/this.pageSize)}),t=new c.Z(this.products.slice(0,this.pageSize));this.notificationManager=new o.Z,this.components={list:t,pagination:e}}renderComponents(){for(const e of Object.keys(this.components)){const t=this.subElements[e],{element:s}=this.components[e];t.append(s)}}render(){const e=document.createElement("div");e.innerHTML=this.getTemplate(),this.element=e.firstElementChild,this.subElements=(0,i.H)(this.element),this.products.length&&this.subElements.emptyData.setAttribute("hidden",!0)}update(e){const t=e*this.pageSize,s=t+this.pageSize,i=this.products.slice(t,s);this.components.list.update(i)}registerObserverEvent(e,t){const s=this.observer.subscribe(e,t);this.subscriptions.push(s)}registerStoreEvent(e,t){const s=this.store.subscribe(e,t);this.subscriptions.push(s)}initEventListeners(){this.registerObserverEvent("page-changed",(e=>{this.update(e),this.notificationManager.show("Page has changed","success")})),this.registerStoreEvent("page-changed",(e=>{this.update(e),this.notificationManager.show("Page has changed","success")}))}remove(){this.element&&this.element.remove()}destroy(){this.remove();for(const e of Object.values(this.components))e.destroy&&e.destroy();this.subscriptions=[],this.element=null,this.components=null,this.subElements=null}}))}}]);